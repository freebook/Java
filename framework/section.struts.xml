<?xml version="1.0" encoding="UTF-8"?>
<chapter id="index"><?dbhtml dir="struts" ?>
	<title>Struts</title>
	<para><ulink url="http://struts.apache.org/" /></para>
	<para>You can checkout all the example applications from the Struts 2 GitHub repository at https://github.com/apache/struts-examples.</para>
	<section id="struts.xml">
		<title>struts.xml</title>
		<para>web.xml</para>
		<programlisting>
		<![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://java.sun.com/xml/ns/javaee"
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
	id="WebApp_ID" version="3.0">
	<display-name>helloworld</display-name>
	<welcome-file-list>
		<welcome-file>index.html</welcome-file>
		<welcome-file>index.htm</welcome-file>
		<welcome-file>index.jsp</welcome-file>
		<welcome-file>default.html</welcome-file>
		<welcome-file>default.htm</welcome-file>
		<welcome-file>default.jsp</welcome-file>
	</welcome-file-list>

	<filter>
		<filter-name>struts2</filter-name>
		<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>struts2</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

</web-app>		
		]]>
		</programlisting>
		<section>
			<title>include</title>
			<programlisting>
			<![CDATA[
	<include file="/cn/netkiller/struts/ajax.xml" />
	<include file="/cn/netkiller/struts/admin.xml" />	
	<include file="/cn/netkiller/struts/logs.xml" />		
			]]>
			</programlisting>
		</section>
	</section>

	<section>
		<title>Struts Tags</title>
		<para>使用Struts Tags 需要在jsp页面中加入下面一行。</para>
		<programlisting>
		<![CDATA[
<%@ taglib prefix="s" uri="/struts-tags" %>
		]]>
		</programlisting>
		<section>
			<title>url</title>
			<programlisting>
			<![CDATA[
<p><a href="<s:url action='hello'/>">Hello World</a></p>

<s:url action="hello" var="helloLink">
  <s:param name="userName">Bruce Phillips</s:param>
</s:url>
 
<p><a href="${helloLink}">Hello Bruce Phillips</a></p>

			]]>
			</programlisting>						
		</section>
		<section id="include">
			<title>include</title>
			<programlisting>
			<![CDATA[
<s:include value="/pages/example.jsp"></s:include>			
			]]>
			</programlisting>
		</section>
		<section>
			<title>form</title>
			<programlisting>
			<![CDATA[
<p>Get your own personal hello by filling out and submitting this form.</p>
 
<s:form action="hello">
 
  <s:textfield name="userName" label="Your name" />
     
   <s:submit value="Submit" />
 
</s:form>
			]]>
			</programlisting>	
		</section>
		
		<section>
			<title>property tag</title>
			<programlisting>
			<![CDATA[
<s:property value="messageStore.message" />
			]]>
			</programlisting>	
		</section>
		<section id="select">
			<title>select</title>
			<programlisting>
			<![CDATA[
<s:select name="city" list="{'Beijing','Shanghai','Guangdong','Shenzhen'}" theme="simple" headerKey="Shenzhen" headerValue="Shenzhen"></s:select>
			
<select name="city" id="searchCriteriaForm_city">
    <option value="Shenzhen">Shenzhen</option>
    <option value="Beijing">Beijing</option>
    <option value="Shanghai">Shanghai</option>
    <option value="Guangdong">Guangdong</option>
    <option value="Shenzhen">Shenzhen</option>
</select>
			]]>
			</programlisting>	
			
			<programlisting>
			<![CDATA[
<s:select name="city" id="city" list="#{1:'Beijing',2:'Shanghai',3:'Guangdong',4:'Shenzhen'}"  label="city" listKey="key" listValue="value"  headerKey="4" headerValue="Shenzhen" />

<select name="city" id="city">
    <option value="4">Shenzhen</option>
    <option value="1">Beijing</option>
    <option value="2">Shanghai</option>
    <option value="3">Guangdong</option>
    <option value="4">Shenzhen</option>
</select>
			]]>
			</programlisting>
			
		</section>
		<section>
			<title></title>
			<programlisting>
			<![CDATA[

			]]>
			</programlisting>	
		</section>
		<section>
			<title></title>
			<programlisting>
			<![CDATA[

			]]>
			</programlisting>	
		</section>
	</section>
	
	<section id="action">
		<title>Action</title>
		<para>struts.xml</para>
		<programlisting>
		<![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

	<constant name="struts.devMode" value="true" />

	<package name="basicstruts2" extends="struts-default">
		<action name="index">
			<result>/index.jsp</result>
		</action>

		<action name="hello"
			class="org.apache.struts.helloworld.action.HelloWorldAction" method="execute">
			<result name="success">/HelloWorld.jsp</result>
		</action>

		<action name="register" class="org.apache.struts.register.action.Register"
			method="execute">
			<result name="success">/thankyou.jsp</result>
			<result name="input">/register.jsp</result>
		</action>

	</package>
</struts>
		]]>
		</programlisting>
	</section>
		
</chapter>